import{createClient as T}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";const B="https://lqznaoovmqsfipptlktu.supabase.co",M="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxxem5hb292bXFzZmlwcHRsa3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODkwMTQzMzksImV4cCI6MjAwNDU5MDMzOX0.CXn7Be_747VSWkg6JQ0LLm6AmQeCmSqRxrSRNatfoL0",C=T(B,M),q=document.getElementById("messageForm"),I=document.getElementById("nombre"),L=document.getElementById("mensaje"),D=document.getElementById("contenedorMensajes");function v(){const e=k(),n=document.getElementById("time"),t=(e.getUTCHours()-5+24)%24,o=E(e.getUTCMinutes()),s=E(e.getUTCSeconds()),c=t>=12?"pm":"am",a=E(t%12||12)+":"+o+":"+s+" "+c;n.textContent=a}function k(){return new Date}function E(e){return(e<10?"0":"")+e}setInterval(v,1e3);function O(){v(),setInterval(v,1e3)}O();function x(e,n={}){let t=document.querySelectorAll(e);t=Array.from(t),t.forEach(o=>{X(o,n)})}function X(e,n){if(!("IntersectionObserver"in window)){n.cb?n.cb(e):entry.target.classList.add("active");return}new IntersectionObserver((o,s)=>{o.forEach(c=>{if(c.isIntersecting){if(n.cb)n.cb(e);else{c.target.classList.add("active");const d=c.target.getAttribute("aria-expanded");d&&console.log({aaa:d})}s.unobserve(c.target)}})},n).observe(e)}x(".intro-text");x(".scroll-reveal",{rootMargin:"-200px"});const P=document.querySelectorAll("[aria-expanded]");P.forEach(e=>{e.addEventListener("click",$)});function $(){const e=event.target,n=e.getAttribute("aria-expanded")==="true",t=e.getAttribute("aria-controls"),o=document.getElementById(t);n?(o.setAttribute("hidden",""),e.setAttribute("aria-expanded","false"),e.textContent="Leer mÃ¡s"):(o.removeAttribute("hidden"),e.setAttribute("aria-expanded","true"),e.textContent="Leer menos",o.querySelector(".text-divided+a").focus())}const b=document.getElementById("pushesBox"),j=document.getElementById("showMoreBtn"),z=document.getElementById("more");let F=5;const H="araceliponce";let J="";function R(e,n){let t=`https://api.github.com/users/${e}/events`,o={};n!==""&&(o={Authorization:`token ${n}`}),fetch(t,{headers:o}).then(s=>s.json()).then(s=>{if(Array.isArray(s)){const d=s.filter(a=>a.type==="PushEvent").map(a=>{const f=a.public;return{repo:a.repo.name,message:a.payload.commits[0].message,date:a.created_at,public:f}});Y(d)}else console.error("Invalid API response format.")}).catch(s=>{console.error("Error:",s)})}function Y(e){b.innerHTML="",e.slice(0,F).forEach(n=>{const t=new Date(n.date),o={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},s=t.toLocaleDateString("es-ES",o),c=document.createElement("span");c.textContent=`Repositorio: ${n.repo} - Mensaje: ${n.message} - Fecha: ${s}`,b.appendChild(c)})}let S=document.getElementById("showPushesBtn");S&&(b.removeAttribute("hidden"),S.addEventListener("click",()=>{R(H,J)}));j.addEventListener("click",()=>{z.removeAttribute("hidden"),w(),document.querySelector(".bg-dark--last").scrollIntoView({behavior:"smooth",block:"start"})});let g=null;async function w(){try{const e=C.from("posts").select("*").order("created_at",{ascending:!0});g&&e.gt("created_at",g);const{data:n,error:t}=await e;t?console.error("Error fetching posts:",t):n.forEach(o=>{const s=new Date(o.created_at),c=s.toLocaleString("es",{day:"numeric"}),d=s.toLocaleString("es",{month:"long"}),a=s.toLocaleString("es",{year:"numeric"}),f=s.toLocaleString("es",{hour:"numeric",minute:"numeric",hour12:!0}),i=`el ${c} de ${d} de ${a}, a las ${f}`,l=document.createElement("div");l.classList.add("msg");const u=document.createElement("span");u.classList.add("name"),u.textContent=o.nombre+", ";const m=document.createElement("span");m.classList.add("date"),m.textContent=i;const r=document.createElement("div");r.classList.add("text"),r.textContent=o.mensaje,l.appendChild(u),l.appendChild(m),l.appendChild(r),D.appendChild(l),(!g||o.created_at>g)&&(g=o.created_at)})}catch(e){console.error("Error:",e)}}q.addEventListener("submit",async e=>{e.preventDefault();const n=I.value,t=L.value,{data:o,error:s}=await C.from("posts").insert([{nombre:n,mensaje:t}]);s||(I.value="",L.value="",await w())});const _=document.querySelectorAll(".text-container");function U(e,n){const t=document.createElement("span");t.textContent=e,t.classList.add("letter"),t.setAttribute("aria-hidden","true"),n.appendChild(t)}_.forEach(e=>{const t=e.innerText.trim().split("");e.innerHTML="",t.forEach(i=>{U(i,e)});const o=e.querySelectorAll(".letter"),s=70,c=500;let d;function a(i,l,u,m){const r=u-i,h=m-l;return Math.sqrt(r*r+h*h)}function f(){o.forEach(i=>{i.classList.remove("hovered")})}e.addEventListener("mousemove",i=>{clearTimeout(d);const l=i.clientX,u=i.clientY;o.forEach(m=>{const r=m.getBoundingClientRect(),h=r.left+r.width/2,p=r.top+r.height/2;a(l,u,h,p)<s?m.classList.add("hovered"):m.classList.remove("hovered")})}),e.addEventListener("touchstart",i=>{clearTimeout(d);const l=i.touches[0],u=l.clientX,m=l.clientY;o.forEach(r=>{const h=r.getBoundingClientRect(),p=h.left+h.width/2,y=h.top+h.height/2;a(u,m,p,y)<s?r.classList.add("hovered"):r.classList.remove("hovered")}),i.preventDefault()}),e.addEventListener("mouseleave",()=>{d=setTimeout(f,c)}),e.addEventListener("touchend",()=>{d=setTimeout(f,c)})});const Q=document.getElementById("btnToggleColors");function A(e){document.body.classList.remove("summer","winter","christmas"),document.body.classList.add(e),localStorage.setItem("selectedSeason",e),Q.querySelector(".text").textContent=`${e}`}function V(){const e=["summer","winter","christmas"],n=localStorage.getItem("selectedSeason"),t=e[Math.floor(Math.random()*e.length)],o=n!==t?t:e[(e.indexOf(t)+1)%e.length];A(o)}document.addEventListener("DOMContentLoaded",function(){const e=localStorage.getItem("selectedSeason");e&&A(e)});document.getElementById("btnToggleColors").addEventListener("click",V);document.querySelectorAll(".smiley-eye");document.querySelector(".face");
